(function(a,b){function q(a){var b=a.settings,c=[],d,e,f;for(d in b)e=h[d]||b[d]["default"],f=b[d].type,e&&c.push('"'+d+'": '+(f==="checkbox")?!!e:f==="multi-select"?'["'+e.split(",").join('", "')+'"]':'"'+e+'"');return a.json&&c.push('"json": '+JSON.stringify(a.json)),"{"+c.join(", ")+"}"}function r(a,b){var c=document.createElement("script"),d=!1;c.type="text/javascript",c.src=a,c.onreadystatechange=c.onload=function(){var a=c.readyState;!d&&(!a||{loaded:1,complete:1}[a])&&(d=!0,b())},(document.body||document.getElementsByTagName("HEAD")[0]).appendChild(c)}function s(a){p||(p=document.getElementsByTagName("script"));var b,c;for(i=p.length-1;i>=0;i--){b=p[i].getAttribute("src"),c=/([^\/\?#]+)(\?|#|$)/.exec(b.toLowerCase())[1];if(RegExp===a.constructor){if(a.test(c))return b}else if(a===c)return b}}function t(){k=jQuery.noConflict(!0),u()}function u(){b(k)}var c=!!jQuery,e=c?jQuery.fn.jquery:undefined,f=a.minJQueryVersion||"0",g=a.bundledJQueryVersion,h={},j=!1,k=jQuery,m,n,o,p;m=location.search.substr(1).split("&");for(i=0,l=m.length;i<l;i++)m[i]=m[i].split("="),h[m[i][0].toLowerCase()]=m[i][1];h.allowjqcdn&&(j=!0),n=h.jquerypath,h.jqueryversion&&(e=h.jqueryversion),!c||e<f?r(j&&a.JQCDNPath?a.JQCDNPath.replace("#{version}",g):"js/jquery-"+g+"-min.js",t):(n=s(/^jquery[-._]?[.0-9]*[-._]?(min)?.js$/),r(n,t))})({"minJQueryVersion":"1.6.0","settings":{"size":{"text":"Select widget size","type":"select","default":"small","options":{"tall":"Tall (150x300)","wide":"Wide (300x150)","small":"Small (200x200)","large":"Large (350x350)"}}},"json":{"resources/models.json":{"box":{"faces":[0,0,0,1,1,0,0,1,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,1,0,0,0,1,0,1,0,0,1,1,1,1],"textures":{"box":"images/textures/box.jpg"},"face-texture-map":[0,0,1,0,2,0,3,0,4,0,5,0]}}},"bundledJQueryVersion":"1.7.0"},function(a,b){var c=a;
/**
 * Original File: ../../support/jquery-plugins/string/string.js
 **/
(function(){(function(a){a.extend(String.prototype,{sprintf:function(){var a=this;for(var b=0,c=arguments.length;b<c;b++)a=a.replace("%s",arguments[b]);return a+""},interpolate:function(a){var b=this,c;for(c in a)b=b.replace(new RegExp("#\\{"+c+"\\}","g"),a[c]);return b+""}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/core/core.js
 **/
(function(){(function(a,b){b.console||(b.console={log:alert}),a.log||(a.log=b.console.log),b.$A||(b.$A=a.makeArray)})(jQuery,this)})();

/**
 * Original File: ../../support/jquery-plugins/klass/klass.js
 **/
(function(){(function(a){var b=!1;a.Klass=function(){},a.Klass.extend=function(c,d){function i(){!b&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;b=!0;var f=new this;b=!1;for(var g in{before:1,after:1}){if(!c[g])continue;for(var h in c[g])c["__"+g+"-"+h]=c[g][h];delete c[g]}for(var g in c)f[g]=typeof c[g]=="function"?function(b,c){return function(){var d=this["__before-"+b],f=this["__after-"+b];d&&(a.data(this,"before-"+b)?d=null:a.data(this,"before-"+b,!0)),f&&(a.data(this,"after-"+b)?f=null:a.data(this,"after-"+b,!0)),d&&d.apply(this,arguments);var g=this._super;this._super=e[b];var h=c.apply(this,arguments);return this._super=g,f&&f.apply(this,arguments),d&&a.data(this,"before-"+b,""),f&&a.data(this,"after-"+b,""),h}}(g,c[g]):c[g];d||(d={});for(var g in d)f[g]=null!=d[g].length&&d[g].splice?(e[g]||[]).concat(d[g]):a.extend({},e[g],d[g]);return f.klass={},i.prototype=f,i.constructor=i,i.extend=arguments.callee,i},a.Klass=a.Klass.extend({$property:function(a,b,c){var d=a.substr(0,1).toUpperCase()+a.substr(1),e=this["set"+d],f=this["get"+d],g=this;this["set"+d]=function(a){var d=e?e.call(g,a):a;return b!==d&&(b=d,c&&g.triggerAndCache&&g.triggerAndCache(c,b)),this},this["get"+d]=function(){return f?f.call(g,b):b},e&&b&&e.call(g,b)},bindMethod:function(){var a=[].slice.apply(arguments),b=a.shift(),c=this;return function(){return c[b].apply(c,a.concat([].slice.apply(arguments)))}},deferMethod:function(){setTimeout(this.bindMethod.apply(this,arguments),1)}}),a.Klass.add=function(b,c,d){var e=b.split("."),f=e.pop(),g=function h(a,b){var c=b.shift();return c?h(a[c]||(a[c]={}),b):a}(a.Klass,e.slice());d.namespace=e.join("."),d.klassName=f,g[f]=(c||a.Klass).extend(d)},a.Klass.get=function(){var b=[].slice.apply(arguments).join(".").split(".");for(var c=b.length-1;c>=0;c--)b[c]||b.splice(c,1);return function d(a,b){if(!a)return undefined;var c=b.shift();return c?d(a[c],b):a}(a.Klass,b)}})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/observable/observable.js
 **/
(function(){(function(a){a.Klass.Observable=a.Klass.extend({init:function(){this.observing={},this.queue={},this.cache={}},bind:function(b,c,d){var e,f,g;if(!this.observing){a.log("Observable klass not properly instantiated.  Did you forget to call _super() from a subclass constructor?");return}b=b?[].concat(b):[],d=d?[].concat(d):[];for(e=d.length-1;e>=0;e--)this.cache[d[e]]&&d.splice(e,1),d[d[e]]=e;for(e=0,f=b.length;e<f;e++)(this.observing[b[e]]=this.observing[b[e]]||[]).push(g={cb:c,req:d}),this.cache[b[e]]&&this.triggerEvent(g,this.cache[b[e]]).checkQueue(b[e]);return this},bindEvents:function b(){var b=arguments,c,d,e;for(c=0,d=b.length;c<d;c++)if(a.isArray(b[c])){if(2!==b[c].length&&3!==b[c].length)throw new Error("invalid argument passed to bindEvents");this.bind(b[c][0],b[c][1],b[c][2])}else{if(c===d-1)throw new Error("argument length mis-match in bindEvents");e=b[c+1],e="function"==typeof e?e:"function"==typeof this[e]?this.bindMethod(e):null;if(!e)throw new Error("argument "+e+" passed to bindEvents is not a valid function or method");this.bind(b[c],e),c++}return this},stopObserving:function(a,b){if(!this.observing[a])return;var c,d;for(c=this.observing[a]||[],d=c.length-1;d>=0;d--){if(b&&c[d].cb!=b)continue;c.splice(d,1)}return this},triggerEvent:function(a,b){var c,d,e,f;for(c=0,d=a.req.length;c<d;c++)this.cache[a.req[c]]&&(a.req[c]="");if(a.req.join("")!=""){var g={args:b,obj:a};for(e=0,f=a.req.length;e<f;e++)(this.queue[a.req[e]]=this.queue[a.req[e]]||[]).push(g)}else a.cb.apply(this,b);return this},checkQueue:function(a){var b,c,d;for(b=0,d=this.queue[a]||[],c=d.length;b<c;b++)d[b].obj.req[d[b].obj.req[a]]="",d[b].obj.req.join("")==""&&d[b].obj.cb.apply(this,d[b].args);return this},trigger:function(a){var b=[].slice.apply(arguments),c,d,e;b.shift();for(c=0,d=this.observing[a]||[],e=d.length;c<e;c++)this.triggerEvent(d[c],b);return this.checkQueue(a),this},triggerAndCache:function(a){var b=$A(arguments);return b.shift(),this.cache[a]=b,this.trigger.apply(this,arguments)}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/mvc/mvc.js
 **/
(function(){(function(a){a.Klass.add("MVC",a.Klass.Observable,{init:function(a,b){var c=this,d,e;this._super(),this.allowedConfigParameters={},this.config=a||{},this.addConfigParameters("controller"),this.addConfigParameters.apply(this,[].slice.call(arguments,1)),c.set(a)},addConfigParameters:function(){var a=[].slice.call(arguments,0),b,c;for(b=0,c=a.length;b<c;b++){if("string"!=typeof a[b])continue;this.allowedConfigParameters[a[b]]=1}return this},set:function(a){var b;for(b in a){if(!a.hasOwnProperty(b))continue;this.config[b]=a[b];if(!this.allowedConfigParameters[b])continue;this[b]=a[b],this.triggerAndCache("set:"+b,a[b])}return this},get:function(a){return this.config[a]},destroy:function(){var a;for(a in this){if(!this.hasOwnProperty(a))continue;delete this[a]}}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/mvc/view.js
 **/
(function(){(function(a){a.Klass.add("MVC.View",a.Klass.MVC,{init:function(b){this._super.apply(this,arguments),this.$domNode=a('<div class="view-'+(this.namespace?this.namespace+"-":"")+this.klassName+'"></div>'),this.guid="view-"+ +(new Date)+Math.random().toString().substr(2)},runjQCmd:function(b,c,d){var e=c;"object"==typeof c&&(c.getContentNode&&(c=c.getContentNode()),a.Klass.MVC.Controller&&c instanceof a.Klass.MVC.Controller&&(c=c.view),c instanceof a.Klass.MVC.View&&(c=c.$domNode));var f=this.$domNode[b].call(d&&this.getContentNode?this.getContentNode():this.$domNode,c);return c&&this.trigger("dom:"+b,e),f.jquery?this:f},runjQCmdMv:function(a,b){return this.runjQCmd.apply(this,arguments),this.trigger("dom:moved",b),this},runjQCmdRm:function(a,b){return this.runjQCmd.apply(this,arguments),this.trigger("dom:removed",b),this},appendTo:function(a){return this.runjQCmdMv("appendTo",a)},prependTo:function(a){return this.runjQCmdMv("prependTo",a)},insertAfter:function(a){return this.runjQCmdMv("insertAfter",a)},insertBefore:function(a){return this.runjQCmdMv("insertBefore",a)},remove:function(a){return this.runjQCmdRm("remove",a)},detach:function(a){return this.runjQCmdRm("detach",a)},innerHeight:function(a){return this.runjQCmd("innerHeight",a)},innerWidth:function(a){return this.runjQCmd("innerWidth",a)},outerHeight:function(a){return this.runjQCmd("outerHeight",a)},outerWidth:function(a){return this.runjQCmd("outerWidth",a)},width:function(a){return this.runjQCmd("width",a)},height:function(a){return this.runjQCmd("height",a)},offset:function(a){return this.runjQCmd("offset",a)},position:function(a){return this.runjQCmd("position",a)},scrollLeft:function(a){return this.runjQCmd("scrollLeft",a)},scrollTop:function(a){return this.runjQCmd("scrollTop",a)}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/mvc/view.mutable.js
 **/
(function(){(function(a){a.Klass.add("MVC.View.Mutable",a.Klass.MVC.View,{init:function(a){this._super.apply(this,arguments)},runjQCmdM:function(a,b){return this.runjQCmd.call(this,a,b,!0),this.trigger("dom:modified",b),this},addClass:function(a){return this.runjQCmdM("addClass",a)},removeClass:function(a){return this.runjQCmdM("removeClass",a)},append:function(a){return this.runjQCmdM("append",a)},css:function(a){return this.runjQCmdM("css",a)},empty:function(a){return this.runjQCmdM("empty",a)},html:function(a){return this.runjQCmdM("html",a)},attr:function(a){return this.runjQCmdM("attr",a)},removeAttr:function(a){return this.runjQCmdM("removeAttr",a)},prop:function(a){return this.runjQCmdM("prop",a)},removeProp:function(a){return this.runjQCmdM("removeProp",a)},wrapInner:function(a){return this.runjQCmdM("wrapInner",a)}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/mobile-webkit/viewport-size.js
 **/
(function(){(function(a){function h(){document.body||setTimeout(h,10),e=!0,b.appendTo(document.body),window.scrollTo(0,1),setTimeout(j,10)}function i(){window.scrollTo(0,1)}function j(){if(!e)return;b.show();var a=window.innerWidth,d=window.innerHeight;if(a!==f||d!==g)f=a,g=d,c.trigger("viewportResize",[a,d]);b.hide()}var b=a("<div></div>").css({position:"absolute",top:0,left:0,width:3e3,height:3e3}).hide(),c=a(window),d=window.innerHeight,e,f,g;a(h),c.bind("orientationchange",i).bind("orientationchange",j).bind("resize",j)})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/mobile-webkit/orientation.js
 **/
(function(){(function(a){a.Klass.add("HTML5.Orientation",a.Klass.Observable,{init:function(b){this._super(),a(window).bind("deviceorientation",this.bindMethod("orientationChange")),this.degrees=0},orientationChange:function(a){var b=a.originalEvent,c=b.webkitCompassHeading,d=b.beta,e=b.gamma,f=window.orientation,g=window.orientation%180,h=g?e:d;if(90===f||180===f)h=-h;g||Math.abs(e)>90&&(h=180-h),this.lastHeading&&Math.abs(c-this.lastHeading)>180&&(this.lastHeading=360-this.lastHeading),this.heading||(this.heading=c),this.trigger("heading",this.heading=this.heading+c-this.lastHeading),this.trigger("angle",this.angle=h),this.lastHeading=c}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/util/util-obj.js
 **/
(function(){jQuery.Util={}})();

/**
 * Original File: ../../support/jquery-plugins/util/image-loader.js
 **/
(function(){(function(a){var b={};a.Util.imageLoader=function(c,d){var e=b[c],f;if(e){if(e.loaded)return d(e.$node);e.cbs.push(d)}else b[c]=e={loaded:!1,cbs:[d],$node:f=a('<img src="'+c+'">')},f.bind("load",function(){if(e.loaded)return;e.loaded=!0;var a;for(a in e.cbs)e.cbs[a](e.$node)}),f[0].height&&setTimeout(function(){f.trigger("load")},1)}})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/sprite-animation/sprite-animation.js
 **/
(function(){(function(a){a.Klass.add("Sprite.Animation",a.Klass.MVC.View,{init:function(){this._super.apply(this,[].slice.call(arguments,0).concat("image","imgWidth","imgHeight","frames","interval","rows","cols")),this.bindEvents("set:interval","restart"),this.bind(["set:image","set:imgWidth","set:imgHeight","set:frames"],this.bindMethod("reset")),this.frame=-1},reset:function(){return this.$domNode.css({backgroundImage:"url('"+this.image+"')",width:this.imgWidth,height:this.imgHeight}),this.setFrame(0)},setFrame:function(a){while(a<0)a+=this.frames;while(a>=this.frames)a-=this.frames;var b=0|a/(this.cols||1),c=a%(this.cols||1);return this.frame=a,this.$domNode.css({backgroundPosition:-c*this.imgWidth+"px "+ -b*this.imgHeight+"px"}),this},stop:function(){return this.nInterval&&(clearInterval(this.nInterval),this.nInterval=null),this},start:function(){return this.nInterval=setInterval(this.bindMethod("nextFrame"),this.interval||50),this},restart:function(){this.stop().setFrame(-1).start()},prevFrame:function(){return this.setFrame(--this.frame)},nextFrame:function(){return this.setFrame(++this.frame)}})})(jQuery)})();

/**
 * Original File: ../../support/jquery-plugins/3d-model/3d-model.js
 **/
(function(){(function(a){a.Klass.add("3DModel",a.Klass.MVC,{init:function(b){this._super.apply(this,[].slice.call(arguments,0).concat("faces","textures","face-texture-map")),this.$domNode=a('<div class="view-'+this.klassName+'"></div>'),this.bindEvents("set:faces","setFaces","set:textures","setTextures","set:texture-map","setTextureMap")},deferReset:function(){this.resetTimer&&(clearTimeout(this.resetTimer),this.resetTimer=null),this.resetTimer=setTimeout(this.bindMethod("reset"),1)},reset:function(){this.resetTimer=null}})})(jQuery)})();

/**
 * Original File: js/cylinder.js
 **/
(function(){(function(a){a.Klass.add("Cylinder",a.Klass.MVC.View,{init:function(b){this._super.apply(this,[].slice.call(arguments,0).concat("perspective","parallaxMultiplier","radius")),this.$domNode.css({width:"100%",height:"100%",position:"absolute",left:0,right:0,"-webkit-perspective-origin":"50% 50%"}),this.$cylinder=a("<div></div>").css({width:"100%",height:"100%","-webkit-transform-style":"preserve-3d"}).appendTo(this.$domNode),this.$container=a("<div></div>").css({"-webkit-transform-style":"preserve-3d",margin:"0 auto",width:0,"-webkit-transition":"-webkit-transform .2s linear"}).appendTo(this.$cylinder),this.bindEvents("set:perspective","onSetPerspective","set:radius","onSetRadius"),this.degrees=0},onSetPerspective:function(a){return this.$domNode.css("-webkit-perspective",""+a)},onSetRadius:function(a){return this.$cylinder.css("-webkit-transform","translateZ("+a+"px)")},rotateBy:function(a){return this.rotateTo(this.degrees+a).trigger("rotate-by",a)},setTransform:function(){return this.$container.css({"-webkit-transform":"rotateY( %sdeg ) translateY( %spx )".sprintf(this.degrees,this.topOffset||0)}),this},rotateTo:function(a){return this.degrees=a,this.setTransform(),this.trigger("rotate-to",this.degrees)},panTo:function(a){return this.topOffset=a,this.setTransform()},getContentNode:function(){return this.$container}})})(jQuery)})();

/**
 * Original File: js/cylinder-item.js
 **/
(function(){(function(a){var b=/^(?:([tlbr])(?::))?([tlbr])?([-+]?\d+)(?:(?::)([tlbr])?([-+]?\d+))?(?:(?::)([tlbr])?([-+]?\d+))?(?:(?::)([tlbr])?([-+]?\d+))?$/i;a.Klass.add("Cylinder.Item",a.Klass.MVC.View.Mutable,{init:function(b){this._super.apply(this,[].slice.call(arguments,0).concat("parallaxMultiplier","xDeg","yPos","zPos","scale","speed")),this.bindEvents("set:xDeg","setTransform","set:yPos","setTransform","set:zPos","setTransform","set:scale","setTransform","set:speed","setTransform","dom:moved","newParent","dom:modified","newContent"),this.$content=a("<div></div>").css({"-webkit-transform":"rotateY(180deg)"}).appendTo(this.$domNode),this.$domNode.css({position:"absolute"}),this.handlers=[],this.width=0,this.prevX=0,this.prevY=0},getContentNode:function(){return this.$content},setTransform:function(){if(!this.parent)return;var a=this.parent.radius;this.$domNode.css({"-webkit-transform":"rotateY( %sdeg ) translateZ( %spx ) translateY( %spx ) scale( %s )".sprintf((this.xDeg||0)+(1-(this.parallaxMultiplier||1))*(this.rotation||0),Math.sqrt(a*a-this.width*this.width/4)*.98+(this.zPos||0),this.yPos||0,this.scale||1),"-webkit-transition":"-webkit-transform %ss linear".sprintf(this.speed||.5)})},newContent:function(){this.width=this.$domNode.width(),this.$domNode.css({left:-this.width>>1})},newParent:function(a){this.parent=a,this.newContent(),this.perspective=a.perspective>>1,this.setTransform(),this.parent.bind("rotate-to",this.bindMethod("rotateTo"))},rotateTo:function(a){this.rotation=a,this.parallaxMultiplier&&this.setTransform(),this.checkTriggers()},checkTriggers:function(){if(!this.handlers.length)return;var a=this.rotation,b,c,d;while(a<0)a+=360;while(a>360)a-=360;for(b=0,c=this.handlers.length;b<c;b++)d=this.handlers[b].xDeg,Math.abs(a-d)<20&&(this.prevX<d?1:0)!==(a<d?1:0)&&this.handlers[b].handler();this.prevX=a},parseLocStr:function(a){if(!b.test(a))throw new Error("Location string "+a+" does not match pattern, e.g. L:L-100:R-100");var c=b.exec(a),d={T:1,B:1,L:2,R:2},e={1:["L","R"],2:["T","B"]},f=d[c[2]]||d[c[4]],g=d[c[6]]||d[c[8]];if(f&&d[c[2]]!==d[c[4]])throw new Error("Location string "+a+" 1st & 2nd locations conflict");if(g&&d[c[6]]!==d[c[8]])throw new Error("Location string "+a+" 3rd & 4th locations conflict");if(c[7]){if(!c[9])throw new Error("Location string "+a+" can not have 3rd location without 4th");if(f===g)throw new Error("Location string "+a+" must have separate axes for 1st/2nd & 3rd/4th locations.");!f&&g?(f=g===1?2:1,c[2]=e[g][0],c[4]=e[g][1]):f&&!g&&(g=f===1?2:1,c[6]=e[f][0],c[8]=e[f][1])}return f||(c[2]="L",c[5]&&(c[4]="R")),f&&!c[2]&&(c[2]=c[4]?f[0]===c[4]?f[1]:f[0]:"L"),f&&!c[4]&&(c[4]=f[0]===c[2]?f[1]:f[0]),g&&!c[6]&&(c[6]=g[0]===c[8]?g[1]:g[0]),g&&!c[8]&&(c[8]=g[0]===c[6]?g[1]:g[0]),c},bindLocHandler:function(a,b,c){var d=this.parseLocStr(a);this.handlers.push(this.configLocInfo({info:d,handler:b,repeat:c}))},configLocInfo:function(a){return a.xDeg=parseFloat(a.info[3]),a},bindLocation:function(a,b){return this.bindLocHandler(a,b)},bindLocationRepeater:function(a,b){return this.bindLocHandler(a,b,!0)}})})(jQuery)})();

/**
 * Original File: js/cylinder-background.js
 **/
(function(){(function(a){a.Klass.add("Cylinder.Background",a.Klass.Cylinder,{init:function(){this._super.apply(this,[].slice.call(arguments,0).concat("images","faces")),this.bindEvents("set:images","setImages","set:faces","build")},setImages:function c(b){var c=0,d=this,e,f;this.$images=[];for(e=0,f=b.length;e<f;e++)a.Util.imageLoader(b[e],function(a){return function(b){d.$images[a]=b;if(--c)return;d.build()}}(e)),c++},removeFaces:function(){var a,b;if(this.faceKlss)for(a=0,b=this.faceKlss.length;a<b;a++)this.faceKlss[a].destroy()},build:function e(){if(!this.$images||!this.$images.length||!this.faces)return;var b=0,c=this.$images[0][0].height,d=this.$images.length-1,e=0,f,g,h,i,j,k;for(f=0,g=this.$images.length;f<g;f++)b+=this.$images[f][0].width;i=b/this.faces,this.set({radius:b/Math.PI/2}),this.removeFaces(),this.faceKlss=[];for(f=0,g=this.faces;f<g;f++)h=new a.Klass.Cylinder.Item({xDeg:360/this.faces*f,xPatch:f?0:-360/this.faces/2}),j=a('<canvas width="%s" height="%s"></canvas>'.sprintf(0|i,0|c)),k=j[0].getContext("2d"),k.drawImage(this.$images[d][0],e?this.$images[d][0].width-e:0,0,0|i,c,0,0,0|i,c),h.append(j).appendTo(this),e+=i,e+.1>=this.$images[d][0].width&&(e=0),e===i&&(d++,d===this.$images.length&&(d=0)),this.faceKlss.push(h);var l=this.$domNode.find(".view-Cylinder-Item:first"),m=l.parent();l.prependTo(m)}})})(jQuery)})();

/**
 * Original File: js/widget.js
 **/
(function(){function o(a,b,c){var d=new $.Klass.Cylinder.Item(c);return d.append(a).appendTo(b)}function p(a){return $('<audio preload="auto"><source src="'+a+'"></audio>').appendTo(document.body).get(0)}var a=$("#widget"),b=$(window),c=[],d,e,f,g,h,i,j,k,l,m,n;b.bind("viewportResize",function(b,c,d){a.css({width:c,height:j=d})}),function(){function f(f){++e,c.css("width",e/b*242),e===b&&setTimeout(function(){$("#loading").fadeOut(function(){a.css({opacity:1})}),console.log(d.$domNode.height())},500)}function g(a){f(a),i=a[0].height}var b=0,c=$(".progress"),e=0;$.Util.imageLoader("images/dead_guy.png",f),b++,$.Util.imageLoader("images/john_carter.png",f),b++,$.Util.imageLoader("images/left_ship.png",f),b++,$.Util.imageLoader("images/logo.png",f),b++,$.Util.imageLoader("images/moons.png",f),b++,$.Util.imageLoader("images/panarama-1.jpg",g),b++,$.Util.imageLoader("images/panarama-2.jpg",f),b++,$.Util.imageLoader("images/panarama-3.jpg",f),b++,$.Util.imageLoader("images/panarama-4.jpg",f),b++,$.Util.imageLoader("images/right_ship.png",f),b++,$.Util.imageLoader("images/right_ship_shadow.png",f),b++,$.Util.imageLoader("images/textures/crystal_200.png",f),b++,$.Util.imageLoader("images/textures/box.jpg",f),b++}(),function(){var a=new $.Klass.HTML5.Orientation,b,d,e;a.bind("heading",function(a){for(g=0,h=c.length;g<h;g++)c[g].rotateTo(a)}).bind("angle",function(a){var b=90,d=20,e=i-j,f=Math.min(e,Math.max(0,(b+d-a)/(2*d)*e)),g,h;for(g=0,h=c.length;g<h;g++)c[g].panTo(-f)}),$(document.body).bind("mousedown touchstart",function(a){b=a,d=a.pageX,e=a.pageY}).bind("mouseup touchend",function(a){a.preventDefault(),b=!1}).bind("mousemove touchmove",function(a){if(!b)return;if(Math.abs(a.pageX-d)>Math.abs(a.pageY-e)){a.preventDefault();var f=(a.pageX-d)/10,g,h;for(g=0,h=c.length;g<h;g++)c[g].rotateBy(-f)}d=a.pageX,e=a.pageY})}(),d=new $.Klass.Cylinder.Background({images:["images/panarama-4.jpg","images/panarama-3.jpg","images/panarama-2.jpg","images/panarama-1.jpg"],faces:48,perspective:500}),d.appendTo(a),c.push(d),e=(new $.Klass.Cylinder({radius:1222,perspective:500})).appendTo(a),c.push(e);for(g=0,h=c.length;g<h;g++)c[g].rotateTo(15);(function(){f=new $.Klass.Sprite.Animation({image:"images/textures/crystal_200.png",imgWidth:200,imgHeight:200,frames:36,rows:6,cols:6,interval:100});var b,c;f.$domNode.bind("mousedown touchstart",function(a){a.preventDefault(),a.stopPropagation(),f.stop(),b=a,c=f.frame}),a.bind("mouseup touchend",function(a){if(!b)return;a.preventDefault(),a.stopPropagation(),b=!1,f.start()}).bind("mousemove touchmove",function(a){if(!b)return;a.preventDefault(),a.stopPropagation(),f.setFrame(c+(0|(a.pageX-b.pageX)/10)),a.preventDefault()}),o(f,e,{xDeg:-130,yPos:442})})(),o($("<div></div>").css({background:"url( 'images/dead_guy.png' ) no-repeat",width:477,height:83}),e,{xDeg:-171,yPos:675,scale:.9}),o($("<div></div>").css({background:"url( 'images/john_carter.png' ) no-repeat",width:609,height:725}),e,{xDeg:106,yPos:467,zPos:200}),function(){var a=$("<div></div>").css({background:"url( 'images/left_ship.png' ) no-repeat",width:252,height:157}).hide(),b=o(a,e,{xDeg:220,zPos:500,yPos:255,scale:.01}),c=!1;b.bindLocation("325",function(){if(c)return;a.show(),b.set({zPos:-200,yPos:-50,scale:2,speed:2}),n.play(),c=!0})}(),o($("<div></div>").css({background:"url( 'images/logo.png' ) no-repeat",width:914,height:671}),e,{xDeg:-196,yPos:275,zPos:250,scale:1.15}),o($("<div></div>").css({background:"url( 'images/moons.png' ) no-repeat",width:415,height:359}),e,{xDeg:-55,yPos:-55,parallaxMultiplier:1.35}),o($("<div></div>").css({background:"url( 'images/right_ship.png' ) no-repeat",width:734,height:273}),e,{xDeg:53,yPos:-125,zPos:300,scale:2}),o($("<div></div>").css({background:"url( 'images/right_ship_shadow.png' ) no-repeat",width:657,height:186}),e,{xDeg:53,yPos:495,zPos:300,scale:1.6}),o($("<div></div>").css({background:"url( 'images/right_ship.png' ) no-repeat",width:734,height:273}),e,{xDeg:86,yPos:-95,zPos:400,scale:.8}),o($("<div></div>").css({background:"url( 'images/right_ship_shadow.png' ) no-repeat",width:657,height:186}),e,{xDeg:86,yPos:455,zPos:400,scale:.8}),o($("<div></div>").css({background:"url( 'images/right_ship.png' ) no-repeat",width:734,height:273}),e,{xDeg:14,yPos:-145,zPos:500}),o($("<div></div>").css({background:"url( 'images/right_ship_shadow.png' ) no-repeat",width:657,height:186}),e,{xDeg:14,yPos:443,zPos:500}),function(){k=p("resources/sounds/loop.mp3"),l=p("resources/sounds/loop.mp3"),m=p("resources/sounds/alien_yell.mp3"),n=p("resources/sounds/ship_pass.mp3"),k.play(),$(k).bind("ended",function(){l.play(),this.currentTime=0,this.pause()}),$(l).bind("ended",function(){k.play(),this.currentTime=0,this.pause()})}()})();
})